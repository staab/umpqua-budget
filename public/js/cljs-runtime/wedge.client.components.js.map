{"version":3,"sources":["wedge/client/components.cljs"],"mappings":";;;;;;;AASA,AAAA,AAAKA;AACL,AAAA,AAAKC;AACL,AAAA,AAAKC;AACL,AAAA,AAAKC;AAEL,AAAA,AAAA,AAAA,AAAA,AAAA,AAAKC;AAEL,AAAA,AAAMC,AAAKC,AAAEC;AAAb,AAAgB,AAAI,AAAA,AAACC,AAAID;AAAT;;AAAc,AAAA,AAAO,AAAGD,AAAEC;;;AAE1C,AAAA,AAAME,AAAkBC,AAAGC,AAAGC,AAAEC;AAAhC,AACE,AAAMC,AAAI,AAAA,AAAG,AAAG,AAAA,AAAGD,AAAQE;AAA3B,AAAA,AAAA,AAAA,AACM,AAAGL,AAAG,AAAGE,AAAE,AAAMI,AAAQF,AACzB,AAAGH,AAAG,AAAGC,AAAE,AAAMI,AAAQF;;AAEjC,AAAA,AAAMG,AAAcC,AAAEC,AAAEP,AAAEQ,AAAMC;AAAhC,AACE,AAAAC,AAA8B,AAACb,AAAiBS,AAAEC,AAAEP,AAAES;AAAtDC,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAC,AAAA,AAAAD,AAAA,AAAA,AAAA,AAAA,AAAAE,AAAAC,AAAAH,AAAAA;AAAA,AAAAI,AAAAJ,AAAA,AAAOM;AAAP,AAAAF,AAAAJ,AAAA,AAAkBO;AAAlBF,AAC0B,AAAClB,AAAiBS,AAAEC,AAAEP,AAAEQ;AADlDO,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAJ,AAAA,AAAAI,AAAA,AAAA,AAAA,AAAA,AAAAH,AAAAC,AAAAE,AAAAA;AAAA,AAAAD,AAAAC,AAAA,AACOG;AADP,AAAAJ,AAAAC,AAAA,AACgBI;AACVC,AAAe,AAAA,AAAA,AAAI,AAAA,AAAI,AAAGX,AAAID;AAC9Ba,AAAE,AAAA,AAAA,AAAA,AAACC,AAAgBN,AAAQC;AAC3BM,AAAE,AAAA,AAAA,AAAA,AAAA,AAAA,AAACD,AAAgBtB,AAAEA,AAAIoB,AAAiBF,AAAMC;AAJtD,AAKE,AAAA,AAAKE,AAAME;;AAIf,AAAA,AAAMC,AAAkBC,AAAQC,AAAOC;AAAvC,AACE,AAAM1B,AAAI,AAAA,AAAC2B;AACLC,AAAW,AAAA,AAAAC,AAAIC,AAAIJ;AADzB,AAAA,AAAA,AAAA,AAAA,AAAA,AAEMK,AAA2BN;AAFjC,AAGE;;AAAA,AACE,AAAI,AAAA,AAAAI,AAAGD,AAAYE;AAAnB,AAAA;;AAAA,AAAA,AAAA,AAAA,AAAA,AAGI,AACC,AAAA,AAAAD,AAAGL,AAASxB,AACZ;AACE,AAACgC,AACA;;AAAA,AAAO,AAACC,AAAOjC,AAAI,AAAMG,AAAQqB,AAAQ,AAAA,AAAO,AAAA,AAAG,AAAA,AAAAK,AAAIC,AAAIF;;;;AAF9D,AAAA,AAGS,AAAA,AAACM,AAAMH,AAAS,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAF,AAACzB,AAAyBJ;;AALpD,AAAA,AAAA,AAAA,AAAA,AAAA,AAMC,AAAA,AAAGwB,AAAoB,AAAA,AAACU,AAAMH,AAAS,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAF,AAACzB,AAAyBJ,AAClD,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAACmC,AAAMJ;;;;;;AAEjC,AAAA,AAAMK,AAAkBC,AAAMC,AAAMC;AAApC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAEQF,AAGA,AAAA,AAAA,AAAA,AAAKC,AAAUC,AAAe,AAAC/C,AAAI8C,AAAMC;;AAEjD,AAAA,AAAMC;AAAN,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAEQjD,AAGAA;;AAER,AAAA,AAAMkD;AAAN,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAIKlB,AAAqBnC,AACtBoD,AACAA,AACAA;;AAEJ,AAAA,AAAAE,AAAME;AAAN,AAAA,AAAAD,AAAAD;AAAAC,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAjC,AAAA,AAAAiC,AAAA,AAAA,AAAA,AAAA,AAAAhC,AAAAC,AAAA+B,AAAAA;AAAAA,AAAoDI;AAApD,AAAAlC,AAAA8B,AAAA,AAA+BE;AAA/B,AAAAhC,AAAA8B,AAAA,AAAuCG;AAAvC,AACE,AAAA,AAAME;AAAN,AACMC;AADN,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAKQ,AAAA,AAAA,AAA0B,AAAA,AAAUJ,AAEzC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAI,AAAGG,AAAMC,AAEV1B,AAAqBpC,AACrBoC,AAAqByB,AAAM,AAAGC,AAAQ,AAAA,AAAQ,AAAA,AAAS3D,AAEvDiC,AAAqBlC,AACrBkC,AAAqByB,AAAM,AAAGC,AAAQ,AAAA,AAAS9D,AAEhD,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAI,AAAC+D,AAAOJ;;AAOnB,AAAA,AAAMK;AAAN,AACE,AAAAC,AAAA,AAAAvB,AAAiC0B;AAAjCH,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA1C,AAAA,AAAA0C,AAAA,AAAA,AAAA,AAAA,AAAAzC,AAAAC,AAAAwC,AAAAA;AAAA,AAAAvC,AAAAuC,AAAA,AAAcC;AAAd,AAAAxC,AAAAuC,AAAA,AAAwBE;AAAxB,AACE,AAAUA;AAAV;AAAA,AAAgB,AAACE;;;AADnB,AAAA,AAGG,AAAA,AAAA,AAAIF,AACDV,AAAgBU,AAChBb;;AAER,AAAA,AAAMgB;AAAN,AAAA,AAAA,AAAA;;AAIA,AAAA,AAAMC;AAAN,AAAA,AAAA,AAAA;;AAIA,AAAA,AAAMC;AAAN,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAE6BC,AACrBC,AAAKC,AAAKC,AAAmB,AAAA,AAAA,AAAA,AAAAlC,AAAA,AAAA,AAACmC,AACLC;;AAEjC,AAAA,AAAMC;AAAN,AAAA,AAAA,AAAA;;AAIA,AAAA,AAAMC;AAAN,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAEIhB,AACAe,AACAT,AACAC,AACAC;;AAEJ,AAAA,AAAMS;AAAN,AAAA,AAAA,AAAA,AAAA,AAAA,AACsBC;;AAGtB,AAAA,AAAMC;AAAN,AAAA,AAAA,AACQ,AAAA,AAAAzC,AAAA,AAAA,AAAK0C,AAAYJ,AAAMC","names":["wedge.client.components/PRIMARY","wedge.client.components/PRIMARY-LIGHT","wedge.client.components/SUCCESS","wedge.client.components/ERROR","wedge.client.components/nbsp","wedge.client.components/pct","n","d","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2","wedge.client.components/polar->cartesian","cx","cy","r","deg","rad","js/Math.PI","js/Math","wedge.client.components/describe-arc","x","y","start","end","map__26040","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","map__26041","start-x","start-y","end-x","end-y","large-arc-flag","m","clojure.string.join.cljs$core$IFn$_invoke$arity$2","a","wedge.client.components/dashboard-circle","degrees","stroke","delay-by","reagent.core.atom.cljs$core$IFn$_invoke$arity$1","start-time","cljs.core/deref","wedge.client.state/now","attrs","js/requestAnimationFrame","cljs.core/reset!","cljs.core.assoc.cljs$core$IFn$_invoke$arity$3","cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic","wedge.client.components/dashboard-budget","title","total","budgeted","wedge.client.components/dashboard-budget-empty","wedge.client.components/dashboard-loading","p__26044","map__26045","wedge.client.components/dashboard-value","balance","budgets","data","spent","budget","cljs.core/empty?","wedge.client.components/dashboard","map__26047","last-load","value","wedge.client.state/db","wedge.client.actions/initialize!","wedge.client.components/add-button","wedge.client.components/sidebar","wedge.client.components/header","wedge.client.actions/toggle-sidebar!","wedge.client.state/page","cljs.core/name","camel-snake-kebab.core/->Camel_Snake_Case","clojure.string/replace","wedge.client.actions/toggle-picker!","wedge.client.components/footer","wedge.client.components/app","wedge.client.components/login-page","wedge.client.actions/link-account!","wedge.client.components/root","wedge.client.state/session-id"],"sourcesContent":["(ns wedge.client.components\n  (:require [clojure.string :as s]\n            [reagent.core :as r]\n            [camel-snake-kebab.core :refer [->Camel_Snake_Case]]\n            [wedge.client.state :refer [session-id db page now]]\n            [wedge.client.actions :as actions]))\n\n;; Utils\n\n(def PRIMARY \"#479AFF\")\n(def PRIMARY-LIGHT \"#EDF5FF\")\n(def SUCCESS \"#6DFF6A\")\n(def ERROR \"#FF7373\")\n\n(def nbsp {:dangerouslySetInnerHTML {:__html \"&nbsp;\"}})\n\n(defn pct [n d] (if (= 0 d) 0 (* 100 (/ n d))))\n\n(defn polar->cartesian [cx cy r deg]\n  (let [rad (/ (* (- deg 90) js/Math.PI) 180.0)]\n    {:x (+ cx (* r (.cos js/Math rad)))\n     :y (+ cy (* r (.sin js/Math rad)))}))\n\n(defn describe-arc [x y r start end]\n  (let [{start-x :x start-y :y} (polar->cartesian x y r end)\n        {end-x :x end-y :y} (polar->cartesian x y r start)\n        large-arc-flag (if (<= (- end start) 180.0) 0 1)\n        m (s/join \" \" [\"M\" start-x start-y])\n        a (s/join \" \" [\"A\" r r 0 large-arc-flag 0 end-x end-y])]\n    (str m \" \" a)))\n\n;; Dashboard\n\n(defn dashboard-circle [degrees stroke delay-by]\n  (let [deg (r/atom 0)\n        start-time (+ @now delay-by)\n        attrs {:fill :none :stroke stroke :stroke-width \"3%\"}]\n    (fn []\n      (if (> start-time @now)\n        [:span]\n        [:svg.dashboard-circle {:view-box \"0 0 100 100\"}\n          (cond\n           (> degrees @deg)\n           (do\n             (js/requestAnimationFrame\n              (fn [] (reset! deg (.min js/Math degrees (* 360 (/ (- @now start-time) 400))))))\n             [:path (assoc attrs :d (describe-arc 50 50 35 0 @deg))])\n           (< degrees 360) [:path (assoc attrs :d (describe-arc 50 50 35 0 @deg))]\n           :else [:circle (assoc attrs :cx 50 :cy 50 :r 35)])]))))\n\n(defn dashboard-budget [title total budgeted]\n  [:div.dashboard-budget\n   [:h3 title]\n   [:div.dashboard-budget-bar]\n   [:div.dashboard-budget-settings]\n   [:h4 (str total \"/\" budgeted \" - \" (pct total budgeted) \"%\")]])\n\n(defn dashboard-budget-empty []\n  [:div.dashboard-budget\n   [:h3 nbsp]\n   [:div.dashboard-budget-bar]\n   [:div.dashboard-budget-settings]\n   [:h4 nbsp]])\n\n(defn dashboard-loading []\n  [:div.dashboard-loading\n   [:div.sub-header {:dangerouslySetInnerHTML {:__html \"&nbsp;\"}}]\n   [:div.dashboard-circles\n    [dashboard-circle 360 PRIMARY-LIGHT 0]]\n   [dashboard-budget-empty]\n   [dashboard-budget-empty]\n   [dashboard-budget-empty]])\n\n(defn dashboard-value [{:keys [balance budgets] :as data}]\n  (let [spent 1989\n        budget 1490]\n    [:div\n     [:div.sub-header\n      [:i.fa.fa-info-circle]\n      [:p (str \"Your account has $\" (.toFixed balance 2) \" in it\")]]\n    [:div.dashboard-content\n     (if (> spent budget)\n      [:div.dashboard-circles\n       [dashboard-circle 360 PRIMARY 0]\n       [dashboard-circle (-> spent (/ budget) (* 360) (- 360)) ERROR 400]]\n      [:div.dashboard-circles\n       [dashboard-circle 360 SUCCESS 0]\n       [dashboard-circle (-> spent (/ budget) (* 360)) PRIMARY 0]])\n      [:div.dashboard-budgets.section\n       (if (empty? budgets)\n         [:p\n          \"No budgets yet! Click \"\n          [:a {:href \"/budgets/new\"} \"here\"]\n          \" to add one.\"]\n         \"hi\")]]]))\n\n(defn dashboard []\n  (let [{:keys [last-load value]} @db]\n    (when-not value (actions/initialize!))\n    [:div.page.dashboard\n     (if value\n       [dashboard-value value]\n       [dashboard-loading])]))\n\n(defn add-button []\n  [:div.add-button\n    \"add-button\"])\n\n(defn sidebar []\n  [:div.sidebar\n   \"sidebar\"])\n\n(defn header []\n  [:div.header\n   [:i.fa.fa-menu {:on-click actions/toggle-sidebar!}]\n   (-> @page name ->Camel_Snake_Case (s/replace #\"_\" \" \"))\n   [:i.fa.fa-calendar {:on-click actions/toggle-picker!}]])\n\n(defn footer []\n  [:div.footer\n    \"footer\"])\n\n(defn app []\n  [:div\n   [dashboard]\n   [footer]\n   [add-button]\n   [sidebar]\n   [header]])\n\n(defn login-page []\n  [:button {:on-click actions/link-account!}\n    \"link account\"])\n\n(defn root []\n  [:div (if @session-id [app] [login-page])])\n"]}