{"version":3,"sources":["wedge/client/components/pages/dashboard.cljs"],"mappings":"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","names":["wedge.client.components.pages.dashboard/dashboard-circle","degrees","stroke","delay-by","deg","reagent.core.atom.cljs$core$IFn$_invoke$arity$1","start-time","cljs.core/deref","wedge.client.state/now","attrs","js/requestAnimationFrame","cljs.core/reset!","js/Math","cljs.core.assoc.cljs$core$IFn$_invoke$arity$3","wedge.client.components.utils/describe-arc","cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic","wedge.client.components.pages.dashboard/dashboard-budget","title","total","budgeted","wedge.client.components.utils/pct","wedge.client.components.pages.dashboard/dashboard-budget-empty","wedge.client.components.utils/nbsp","wedge.client.components.pages.dashboard/dashboard-loading","wedge.client.components.utils/PRIMARY-LIGHT","p__25658","map__25659","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","wedge.client.components.pages.dashboard/dashboard-value","balance","budgets","data","spent","budget","wedge.client.components.utils/PRIMARY","wedge.client.components.utils/DANGER","wedge.client.components.utils/SUCCESS","cljs.core/empty?","wedge.client.components.utils/link","wedge.client.components.pages.dashboard/dashboard","map__25661","last-load","value","wedge.client.state/db","wedge.client.actions/initialize!"],"sourcesContent":["(ns wedge.client.components.pages.dashboard\n  (:require [reagent.core :as r]\n            [wedge.client.state :refer [db now]]\n            [wedge.client.actions :as actions]\n            [wedge.client.components.utils\n             :refer [PRIMARY PRIMARY-LIGHT SUCCESS DANGER\n                     nbsp pct describe-arc link]]\n            ))\n\n(defn dashboard-circle [degrees stroke delay-by]\n  (let [deg (r/atom 0)\n        start-time (+ @now delay-by)\n        attrs {:fill :none :stroke stroke :stroke-width \"3%\"}]\n    (fn []\n      (if (> start-time @now)\n        [:span]\n        [:svg.dashboard-circle {:view-box \"0 0 100 100\"}\n          (cond\n           (> degrees @deg)\n           (do\n             (js/requestAnimationFrame\n              (fn [] (reset! deg (.min js/Math degrees (* 360 (/ (- @now start-time) 400))))))\n             [:path (assoc attrs :d (describe-arc 50 50 35 0 @deg))])\n           (< degrees 360) [:path (assoc attrs :d (describe-arc 50 50 35 0 @deg))]\n           :else [:circle (assoc attrs :cx 50 :cy 50 :r 35)])]))))\n\n(defn dashboard-budget [title total budgeted]\n  [:div.dashboard-budget\n   [:h3 title]\n   [:div.dashboard-budget-bar]\n   [:div.dashboard-budget-settings]\n   [:h4 (str total \"/\" budgeted \" - \" (pct total budgeted) \"%\")]])\n\n(defn dashboard-budget-empty []\n  [:div.dashboard-budget\n   [:h3 nbsp]\n   [:div.dashboard-budget-bar]\n   [:div.dashboard-budget-settings]\n   [:h4 nbsp]])\n\n(defn dashboard-loading []\n  [:div.dashboard-loading\n   [:div.sub-header {:dangerouslySetInnerHTML {:__html \"&nbsp;\"}}]\n   [:div.dashboard-circles\n    [dashboard-circle 360 PRIMARY-LIGHT 0]]\n   [dashboard-budget-empty]\n   [dashboard-budget-empty]\n   [dashboard-budget-empty]])\n\n(defn dashboard-value [{:keys [balance budgets] :as data}]\n  (let [spent 1989\n        budget 1490]\n    [:div\n     [:div.sub-header\n      [:i.fa.fa-info-circle]\n      [:p (str \"Your account has $\" (.toFixed balance 2) \" in it\")]]\n    [:div.dashboard-content\n     (if (> spent budget)\n      [:div.dashboard-circles\n       [dashboard-circle 360 PRIMARY 0]\n       [dashboard-circle (-> spent (/ budget) (* 360) (- 360)) DANGER 400]]\n      [:div.dashboard-circles\n       [dashboard-circle 360 SUCCESS 0]\n       [dashboard-circle (-> spent (/ budget) (* 360)) PRIMARY 0]])\n      [:div.dashboard-budgets.section\n       (if (empty? budgets)\n         [:p \"No budgets yet! Click \" [link :budgets/new \"here\"] \" to add one.\"]\n         \"hi\")]]]))\n\n(defn dashboard []\n  (let [{:keys [last-load value]} @db]\n    (when-not value (actions/initialize!))\n    [:div.page.dashboard\n     (if value\n       [dashboard-value value]\n       [dashboard-loading])]))\n"]}